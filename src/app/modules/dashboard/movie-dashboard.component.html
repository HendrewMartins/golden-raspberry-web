<div class="dashboard-container">
  <app-table-generic
    [title]="'List years with multiple winners'"
    [columns]="[
      { def: 'year', header: 'Year' },
      { def: 'winnerCount', header: 'Win Count' }
    ]"
    [data]="years">
  </app-table-generic>

  <app-table-generic
    [title]="'Top 3 studios with winners'"
    [columns]="[
      { def: 'name', header: 'Name' },
      { def: 'winCount', header: 'Win Count' }
    ]"
    [data]="studios">
  </app-table-generic>


</div>
<div class="dashboard-container">
  <mat-card class="panel">
    <h3>List years with multiple winners</h3>
    <table mat-table [dataSource]="years" class="mat-elevation-z8">
      <ng-container matColumnDef="year">
        <th mat-header-cell *matHeaderCellDef>Year</th>
        <td mat-cell *matCellDef="let element">{{ element.year }}</td>
      </ng-container>

      <ng-container matColumnDef="winnerCount">
        <th mat-header-cell *matHeaderCellDef>Win Count</th>
        <td mat-cell *matCellDef="let element">{{ element.winnerCount }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="yearsColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: yearsColumns;"></tr>
    </table>
  </mat-card>

  <mat-card class="panel">
    <h3>Top 3 studios with winners</h3>
    <table mat-table [dataSource]="studios" class="mat-elevation-z8">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <ng-container matColumnDef="winCount">
        <th mat-header-cell *matHeaderCellDef>Win Count</th>
        <td mat-cell *matCellDef="let element">{{ element.winCount }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="studiosColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: studiosColumns;"></tr>
    </table>
  </mat-card>

  <mat-card class="panel">
    <h3>Producers with longest and shortest interval between wins</h3>
    <div>
      <strong>Maximum</strong>
      <table mat-table [dataSource]="intervals?.max" class="mat-elevation-z8">
        <ng-container matColumnDef="producer">
          <th mat-header-cell *matHeaderCellDef>Producer</th>
          <td mat-cell *matCellDef="let element">{{ element.producer }}</td>
        </ng-container>

        <ng-container matColumnDef="interval">
          <th mat-header-cell *matHeaderCellDef>Interval</th>
          <td mat-cell *matCellDef="let element">{{ element.interval }}</td>
        </ng-container>

        <ng-container matColumnDef="previousWin">
          <th mat-header-cell *matHeaderCellDef>Previous Year</th>
          <td mat-cell *matCellDef="let element">{{ element.previousWin }}</td>
        </ng-container>

        <ng-container matColumnDef="followingWin">
          <th mat-header-cell *matHeaderCellDef>Following Year</th>
          <td mat-cell *matCellDef="let element">{{ element.followingWin }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="intervalColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: intervalColumns;"></tr>
      </table>
    </div>

    <div style="margin-top: 16px;">
      <strong>Minimum</strong>
      <table mat-table [dataSource]="intervals?.min" class="mat-elevation-z8">
        <ng-container matColumnDef="producer">
          <th mat-header-cell *matHeaderCellDef>Producer</th>
          <td mat-cell *matCellDef="let element">{{ element.producer }}</td>
        </ng-container>

        <ng-container matColumnDef="interval">
          <th mat-header-cell *matHeaderCellDef>Interval</th>
          <td mat-cell *matCellDef="let element">{{ element.interval }}</td>
        </ng-container>

        <ng-container matColumnDef="previousWin">
          <th mat-header-cell *matHeaderCellDef>Previous Year</th>
          <td mat-cell *matCellDef="let element">{{ element.previousWin }}</td>
        </ng-container>

        <ng-container matColumnDef="followingWin">
          <th mat-header-cell *matHeaderCellDef>Following Year</th>
          <td mat-cell *matCellDef="let element">{{ element.followingWin }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="intervalColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: intervalColumns;"></tr>
      </table>
    </div>
  </mat-card>

  <mat-card class="panel">
    <h3>List movie winners by year</h3>
    <mat-form-field>
      <input matInput placeholder="Search by year" [(ngModel)]="searchYear" />
    </mat-form-field>
    <button mat-icon-button color="primary" (click)="searchWinnersByYear()" aria-label="Search">
      <mat-icon>search</mat-icon>
    </button>

    <table mat-table [dataSource]="winnersByYear" class="mat-elevation-z8" *ngIf="winnersByYear.length > 0">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
      </ng-container>

      <ng-container matColumnDef="year">
        <th mat-header-cell *matHeaderCellDef>Year</th>
        <td mat-cell *matCellDef="let element">{{ element.year }}</td>
      </ng-container>

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let element">{{ element.title }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="winnersColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: winnersColumns;"></tr>
    </table>
  </mat-card>
</div>
