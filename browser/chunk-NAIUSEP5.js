import{c as L,d as j}from"./chunk-O5PAWH6I.js";import{a as g,b as y,c as w,d as D,e as x,f as S,g as T,h as I,i as W,j as F,k as E,l as Z}from"./chunk-JKNMQEJS.js";import{$a as C,Ad as J,Db as G,Dd as K,Eb as u,Ed as v,Fd as M,Jd as Q,Nd as U,Oa as i,Od as X,Pb as m,Qb as p,Sb as P,Tb as O,Ub as z,Xb as s,Y as B,Yb as H,Zb as N,db as c,id as k,kd as A,tc as $,ub as l,uc as h,vb as o,vc as b,vd as V,wb as a,xb as d,yb as f,yd as q,zb as _}from"./chunk-SL5LNO3K.js";function ue(e,t){if(e&1&&(o(0,"th",11),m(1),a()),e&2){let n=u().$implicit;i(),p(n.header)}}function fe(e,t){if(e&1&&(o(0,"td",12),m(1),a()),e&2){let n=t.$implicit,r=u().$implicit;i(),p(n[r.def])}}function _e(e,t){if(e&1&&(f(0,8),c(1,ue,2,1,"th",9)(2,fe,2,1,"td",10),_()),e&2){let n=t.$implicit;l("matColumnDef",n.def)}}function Ce(e,t){e&1&&d(0,"tr",13)}function he(e,t){e&1&&d(0,"tr",14)}function be(e,t){if(e&1&&(o(0,"table",4),c(1,_e,3,1,"ng-container",5)(2,Ce,1,0,"tr",6)(3,he,1,0,"tr",7),a()),e&2){let n=u(2);l("dataSource",n.data),i(),l("ngForOf",n.columns),i(),l("matHeaderRowDef",n.displayedColumns),i(),l("matRowDefColumns",n.displayedColumns)}}function ve(e,t){if(e&1&&(o(0,"div",2),c(1,be,4,4,"table",3),a()),e&2){let n=u();i(),l("ngIf",(n.columns==null?null:n.columns.length)>0)}}var R=class e{title;columns;data=[];get displayedColumns(){return this.columns.map(t=>t.def)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["app-table-generic"]],inputs:{title:"title",columns:"columns",data:"data"},decls:4,vars:2,consts:[[1,"panel"],["class","table-container",4,"ngIf"],[1,"table-container"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,r){n&1&&(o(0,"mat-card",0)(1,"h3"),m(2),a(),c(3,ve,2,1,"div",1),a()),n&2&&(i(2),p(r.title),i(),l("ngIf",(r.columns==null?null:r.columns.length)>0))},dependencies:[b,$,h,E,g,w,T,D,y,I,x,S,W,F,M,v],styles:[".table-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]})};var Me=()=>({def:"year",header:"Year"}),ge=()=>({def:"winnerCount",header:"Win Count"}),ee=(e,t)=>[e,t],ye=()=>({def:"name",header:"Name"}),we=()=>({def:"winCount",header:"Win Count"}),te=()=>({def:"producer",header:"Producer"}),ne=()=>({def:"interval",header:"Interval"}),ie=()=>({def:"previousWin",header:"Previous Year"}),ae=()=>({def:"followingWin",header:"Following Year"}),oe=(e,t,n,r)=>[e,t,n,r];function De(e,t){e&1&&(o(0,"th",16),m(1,"Id"),a())}function xe(e,t){if(e&1&&(o(0,"td",17),m(1),a()),e&2){let n=t.$implicit;i(),p(n.id)}}function Se(e,t){e&1&&(o(0,"th",16),m(1,"Year"),a())}function Te(e,t){if(e&1&&(o(0,"td",17),m(1),a()),e&2){let n=t.$implicit;i(),p(n.year)}}function Ie(e,t){e&1&&(o(0,"th",16),m(1,"Title"),a())}function We(e,t){if(e&1&&(o(0,"td",17),m(1),a()),e&2){let n=t.$implicit;i(),p(n.title)}}function Fe(e,t){e&1&&d(0,"tr",18)}function Ee(e,t){e&1&&d(0,"tr",19)}function Re(e,t){if(e&1&&(o(0,"table",8),f(1,9),c(2,De,2,0,"th",10)(3,xe,2,1,"td",11),_(),f(4,12),c(5,Se,2,0,"th",10)(6,Te,2,1,"td",11),_(),f(7,13),c(8,Ie,2,0,"th",10)(9,We,2,1,"td",11),_(),c(10,Fe,1,0,"tr",14)(11,Ee,1,0,"tr",15),a()),e&2){let n=u();l("dataSource",n.winnersByYear),i(10),l("matHeaderRowDef",n.winnersColumns),i(),l("matRowDefColumns",n.winnersColumns)}}var re=class e{movieService=B(Z);years=[];studios=[];intervals;winnersByYear=[];searchYear="";yearsColumns=["year","winnerCount"];studiosColumns=["name","winCount"];intervalColumns=["producer","interval","previousWin","followingWin"];winnersColumns=["id","year","title"];constructor(){this.loadDashboardData()}loadDashboardData(){this.movieService.getYearsWithMultipleWinners().subscribe(t=>this.years=t.years),this.movieService.getTopStudiosWithWinCount().subscribe(t=>this.studios=t.studios.slice(0,3)),this.movieService.getWinIntervals().subscribe(t=>this.intervals=t)}searchWinnersByYear(){let t=parseInt(this.searchYear,10);isNaN(t)?this.winnersByYear=[]:this.movieService.getWinnersByYear(t).subscribe(n=>{this.winnersByYear=Array.isArray(n)?n:[n]})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=C({type:e,selectors:[["app-movie-dashboard"]],decls:18,vars:42,consts:[[1,"dashboard-container"],[3,"title","columns","data"],[1,"panel"],[2,"display","flex","align-items","center","gap","8px"],["appearance","outline",2,"flex","1"],["matInput","","placeholder","Search by year",3,"ngModelChange","ngModel"],["mat-icon-button","","color","primary","aria-label","Search",3,"click"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","year"],["matColumnDef","title"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,r){n&1&&(o(0,"div",0),d(1,"app-table-generic",1)(2,"app-table-generic",1),o(3,"mat-card",2)(4,"h3"),m(5,"Producers with longest and shortest interval between wins"),a(),d(6,"app-table-generic",1)(7,"app-table-generic",1),a(),o(8,"mat-card",2)(9,"h3"),m(10,"List movie winners by year"),a(),o(11,"div",3)(12,"mat-form-field",4)(13,"input",5),z("ngModelChange",function(Y){return O(r.searchYear,Y)||(r.searchYear=Y),Y}),a()(),o(14,"button",6),G("click",function(){return r.searchWinnersByYear()}),o(15,"mat-icon"),m(16,"search"),a()()(),c(17,Re,12,3,"table",7),a()()),n&2&&(i(),l("title","List years with multiple winners")("columns",H(16,ee,s(14,Me),s(15,ge)))("data",r.years),i(),l("title","Top 3 studios with winners")("columns",H(21,ee,s(19,ye),s(20,we)))("data",r.studios),i(4),l("title","Maximum")("columns",N(28,oe,s(24,te),s(25,ne),s(26,ie),s(27,ae)))("data",r.intervals==null?null:r.intervals.max),i(),l("title","Minimum")("columns",N(37,oe,s(33,te),s(34,ne),s(35,ie),s(36,ae)))("data",r.intervals==null?null:r.intervals.min),i(6),P("ngModel",r.searchYear),i(4),l("ngIf",r.winnersByYear.length>0))},dependencies:[b,h,E,g,w,T,D,y,I,x,S,W,F,M,v,X,U,Q,j,L,A,k,K,V,q,J,R],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin:0 -8px}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px);box-sizing:border-box;padding:0 8px}"]})};export{re as MovieDashboardComponent};
